#summary createBackup.sh - Creating a snapshot of an existing TYPO3 installation.

= Introduction =

The main purpose of `createBackup.sh` is to create a snapshot of all files in the TYPO3 installation as well as the TYPO3 database. To restore such a snapshot use [RestoreBackupSh restoreBackup.sh].

= Arguments =
{{{
$ ./createBackup.sh --help
  Usage: ./createBackup.sh [OPTIONS]

  Core:
  --help              Display this help and exit.
  --update            Tries to update the script to the latest version.
  --base=PATH         The name of the base path where TYPO3 should be
                      installed. If no base is supplied, "typo3" is 
used.
  --export-config     Prints the default configuration of this script.
  --extract-config    Extracts configuration parameters from TYPO3.

  Database:
  --hostname=HOST     The name of the host where the TYPO3 database is running.
  --username=USER     The username to use when connecting to the TYPO3
                      database.
  --password=PASSWORD The password to use when connecting to the TYPO3
                      database.
  --database=DB       The name of the database in which TYPO3 is stored.
}}}

== Overview ==

Please note, all scripts in the typo3scripts suite always try to _source_ these parameters from an external configuration file named like the script itself with a `.conf` suffix rather than the `.sh` suffix.
So for `createBackup.sh` the proper configuration file would be `createBackup.conf`.
The correct contents for that configuration file can always be taken from the scripts themselves. It is contained between the `# Script Configuration start` and `# Script Configuration end` markers.

The script will always assume the default configuration at first (as defined in the script itself). It then overrides the default configuration with the one defined in aforementioned configuration file. It will then override those values with whatever had been passed on the command line.

*Hint*: It may be desirable to share a configuration file between `createBackup.sh` and `restoreBackup.sh`.

== `--help` ==
Prints the output seen above, giving an overview of available command line parameters.

== `--update` ==
Invokes the self-updating mechanism in this script. This will download the latest release version (from SVN trunk) from `code.google.com` and replace your current script.

Please note, every time the script runs it will perform a quick check if a new version is available. If a new version is found online, the following message will be printed to the standard output:
{{{
NOTE: New version available!
}}}

== `--base` / `BASE` ==
By default, it is assumed that the TYPO3 installation is located in a subfolder relative to the current working directory, named `typo3`. Use `--base` if the installation should be placed in a differently named subfolder.
{{{
$ ./createBackup.sh --base=myt3site
}}}

== `--export-config` ==
Print the default configuration of the script to the standard output.

This allows for easy generation of a default config file, like so:
{{{
$ ./createBackup.sh --export-config > createBackup.conf
}}}

== `--extract-config` ==
Tries to read the database-related parameters out of the TYPO3 configuration file.

This allows for easy generation of a base config file, like so:
{{{
$ ./createBackup.sh --extract-config > createBackup.conf
}}}

In case you're using a non-default TYPO3 installation directory, make sure to supply the `--base` parameter *before* the `--extract-config` parameter.
{{{
$ ./createBackup.sh --base=myt3site --extract-config > createBackup.conf
}}}

== `--hostname` / `HOST` ==
The name of the host where the database for TYPO3 is running.

== `--username` / `USER` ==
The username for the connection to the database for the TYPO3 installation.

== `--password` / `PASS` ==
The password for the connection to the database for the TYPO3 installation.

== `--database` / `DB` ==
The name of the database for the TYPO3 installation.

= Examples =

== Creating a snapshot ==
{{{
/var/www$ cd t3site/
/var/www/t3site$ wget http://typo3scripts.googlecode.com/svn/trunk/createBackup.sh
/var/www/t3site$ chmod 700 createBackup.sh
/var/www/t3site$ ln -s typo3scripts.conf createBackup.conf
/var/www/t3site$ ./createBackup.sh
Sourcing script configuration from createBackup.conf...Done.
Creating TYPO3 backup 'typo3-2012-01-02-14-19.tgz'...
Creating database dump at typo3/database.sql...Done.
Compressing TYPO3 installation...Done.
Deleting database dump...Done!
}}}
Please note, this example assumes that you previously created a configuration file `typo3scripts.conf` to share between scripts.